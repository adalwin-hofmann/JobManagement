!function(a,e){var r=[],s=0;e.fn.simpleUpload=function(a){var n={url:null,change:null,error:null,types:null,fields:null,size:5120};return this.each(function(){function p(a){a.preventDefault(),t.simpleUploadSend()}var t=e(this),o=++s;t.data("simpleUpload",o),a=a||{},e.each(t.data(),function(e,r){"simpleUpload"!=e&&(a[e]="function"==typeof window[r]?window[r]:r)});var i=e.extend({},n,a);"function"==typeof i.change&&t.change(function(){i.change(t[0].files)}),i.trigger?i.trigger instanceof jQuery?i.trigger.click(p):e(document).on("click",i.trigger,p):t.change(p),r[o]=i})},e.fn.simpleUploadSend=function(){return this.each(function(){var a=e(this),s=a.data("simpleUpload"),n=a.attr("name"),p=new FormData;params=r[s];for(var t in a[0].files)if("object"==typeof a[0].files[t]){var o=a[0].files[t];if(!e.typeCheck(o.name,params.types))return"function"==typeof params.error&&params.error({type:"fileType"}),!1;if(o.size/params.size>params.size)return"function"==typeof params.error&&params.error({type:"size"}),!1;p.append(n+"["+t+"]",o)}if("object"==typeof params.fields)for(t in params.fields)if(e.isArray(params.fields[t]))for(var i in params.fields[t])p.append(t+"["+i+"]",params.fields[t][i]);else p.append(t,params.fields[t]);var l={url:params.url,data:p,cache:!1,contentType:!1,processData:!1,type:"POST",complete:function(){a.val(""),params.complete&&params.complete(arguments)}};null!=params.error&&(l.error=params.error),params.success&&(l.success=params.success),params.async&&(l.async=params.async),params.beforeSend&&(l.beforeSend=params.beforeSend),params.global&&(l.global=params.global),params.dataType&&(l.dataType=params.dataType),params.contents&&(l.contents=params.contents),params.jsonp&&(l.jsonp=params.jsonp),params.jsonpCallback&&(l.jsonpCallback=params.jsonpCallback),params.password&&(l.password=params.password),params.username&&(l.username=params.username),params.statusCode&&(l.statusCode=params.statusCode),e.ajax(l)})},e.extend(!0,{typeCheck:function(a,r){return e.isArray(r)?r.indexOf(e.getExt(a))>-1?!0:!1:!0},getExt:function(a){return a.substr(a.lastIndexOf(".")+1)}})}(window,window.jQuery);